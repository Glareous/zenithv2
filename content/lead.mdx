import { Callout, Steps, Tabs, FileTree } from 'nextra/components'

# ğŸ¯ Lead Management Module

<Callout type="info" emoji="â„¹ï¸">
  **Sales Lead Tracking System** - Capture, manage, and convert leads into customers with a comprehensive CRM-style lead management platform.
</Callout>

<br />
## What is Lead Management?
<br />
The **Lead Management** module is a powerful customer relationship management system designed to track potential customers, manage contact information, and streamline your sales pipeline from initial contact to conversion.

<br />

### Lead Management Capabilities

<div className="grid grid-cols-1 md:grid-cols-3 gap-4 my-6">
  <div className="card card-body">
    <h4 className="text-lg font-semibold mb-2">ğŸ‘¤ Contact Management</h4>
    <p className="text-sm text-gray-600 dark:text-gray-400">
      Complete customer contact information and profiles
    </p>
  </div>
  <div className="card card-body">
    <h4 className="text-lg font-semibold mb-2">ğŸ“Š Status Tracking</h4>
    <p className="text-sm text-gray-600 dark:text-gray-400">
      Monitor lead progress through your sales pipeline
    </p>
  </div>
  <div className="card card-body">
    <h4 className="text-lg font-semibold mb-2">ğŸ¤– AI Agent Support</h4>
    <p className="text-sm text-gray-600 dark:text-gray-400">
      Automated lead qualification and follow-up assistance
    </p>
  </div>
</div>

<br />

## âœ¨ Key Features

<Tabs items={['Contact Information', 'Lead Tracking', 'Sales Pipeline']}>
  <Tabs.Tab>
    ### Comprehensive Contact Data
    <br />
    - âœ… First and last name tracking
    - âœ… Email and phone contact information
    - âœ… City/location data
    - âœ… Document identification (CC, CE, Passport, NIT)
    - âœ… Document number storage
    - âœ… Contact relationship tracking
  </Tabs.Tab>
  <Tabs.Tab>
    ### Advanced Lead Management
<br />
    - ğŸ“ˆ Lead status progression (PROCESSING/COMPLETED)
    - ğŸ’¬ Detailed notes and descriptions
    - ğŸ”„ Full CRUD operations
    - âš¡ Real-time updates
    - ğŸ¯ Lead source tracking
    - ğŸ” Easy search and filtering

  </Tabs.Tab>
  <Tabs.Tab>
    ### Sales Pipeline Tools
    <br />

    - ğŸ“Š Pipeline visualization
    - ğŸ¯ Lead scoring and prioritization
    - ğŸ“… Follow-up scheduling
    - ğŸ’¼ Contact association
    - ğŸ“ˆ Conversion tracking
    - ğŸ¤– AI-powered lead nurturing

  </Tabs.Tab>
</Tabs>

<br />

## ğŸš€ Getting Started

<Steps>

### Navigate to Lead Management

Go to the Lead Management page from the sidebar menu under **LEADS â†’ Create-view**

### Create a New Lead

Click the **"Add Lead"** button in the top right corner

### Fill in Lead Information

Complete all required fields:

- Contact details (First Name, Last Name)
- Communication info (Email, Phone)
- Location (City)
- Identification (Document Type & Number)
- Lead details (Message/Notes)
- Status (Processing/Completed)

### Associate with Contact

Select or create a contact to link with this lead

### Save and Track

Click **"Create Lead"** to save. Track progress and update status as lead moves through pipeline.

</Steps>

<br />
## ğŸ“Š Lead Data Structure

```typescript
interface Lead {
  id: string
  firstName: string // Max 100 characters
  lastName: string // Max 100 characters
  phone: string
  email: string // Valid email format
  city: string
  documentType: 'CC' | 'CE' | 'PASSPORT' | 'NIT'
  documentNumber: string
  message: string // Lead notes and details
  status: 'PROCESSING' | 'COMPLETED'
  contactId: string // Associated contact
  projectId: string
  agentId?: string // Lead agent assignment
  createdById: string // User who created the lead
  createdAt: Date
  updatedAt: Date
}
```

<Callout type="warning" emoji="âš ï¸">
  All fields are **required** and must meet validation criteria. Ensure valid email addresses and complete contact information for effective lead tracking.
</Callout>

<br />

## ğŸ¯ Lead Status Flow

<div className="card">
  <div className="card-body">
    <div className="overflow-x-auto">
      <table className="table">
        <thead>
          <tr>
            <th>Status</th>
            <th>Description</th>
            <th>Next Action</th>
            <th>Indicator</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td className="font-semibold">PROCESSING</td>
            <td>Lead is actively being pursued</td>
            <td>Contact, qualify, nurture</td>
            <td>
              <span className="badge badge-warning">ğŸŸ¡ Active</span>
            </td>
          </tr>
          <tr>
            <td className="font-semibold">COMPLETED</td>
            <td>Lead converted or closed</td>
            <td>Follow-up or archive</td>
            <td>
              <span className="badge badge-success">ğŸŸ¢ Closed</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<br />

## ğŸ”§ Common Operations

<Tabs items={['Create Lead', 'Edit Lead', 'View Lead', 'Convert Lead']}>
  <Tabs.Tab>
    ### Creating a New Lead
    <br />

    1. Click **"Add Lead"** button
    2. Fill in all contact information
    3. Select document type and enter number
    4. Add detailed notes in message field
    5. Choose initial status (usually Processing)
    6. Select or create associated contact
    7. Click **"Create Lead"**

    <Callout type="info">
    Make sure you have a project selected before creating a lead!
    </Callout>

  </Tabs.Tab>

  <Tabs.Tab>
    ### Editing an Existing Lead
    <br />

    1. Locate the lead in the table
    2. Click the **Edit** button (âœï¸ pencil icon)
    3. Update lead information or status
    4. Add new notes or updates
    5. Click **"Update Lead"** to save changes

    <Callout>
    Track all interactions and updates in the message field for complete history
    </Callout>

  </Tabs.Tab>

<Tabs.Tab>
  ### Viewing Lead Details
  <br />
  1. Find the lead in the list
  2. Click the **View** button (ğŸ‘ï¸ eye icon)
  3. Review complete lead profile
  4. See contact information
  5. Check status and history
  6. Review associated contact details

  <Callout>
  Lead details show complete interaction history and current status
  </Callout>
</Tabs.Tab>

  <Tabs.Tab>
    ### Converting a Lead
    <br />

    1. Qualify the lead through contact
    2. Update status to **COMPLETED** when:
       - Lead becomes a customer (successful conversion)
       - Lead is disqualified (unsuccessful)
       - Lead is transferred or archived
    3. Document the outcome in message field
    4. Link to customer record if converted

    <Callout type="error" emoji="ğŸ¯">
    Document conversion details for sales analytics and reporting
    </Callout>

  </Tabs.Tab>
</Tabs>

<br />

## ğŸ” Project Integration

<Callout type="info" emoji="ğŸ¢">
  The Lead Management module is **project-scoped** for organized sales tracking.
</Callout>
<br />

### Key Points:

<br />

- âœ… Each lead belongs to a specific project
- âœ… Leads are associated with contacts in the same project
- âœ… AI agents automatically assigned from organization
- âœ… Only project members can access leads
- âœ… Track who created each lead (createdById)

<br />

## ğŸ› ï¸ API Reference

The module uses **tRPC** for type-safe API calls:

```typescript
// Get all leads for a project
projectLead.getByProject({
  projectId: string,
  page?: number,
  limit?: number,
  status?: 'PROCESSING' | 'COMPLETED'
})

// Create a new lead
projectLead.create({
  firstName,
  lastName,
  phone,
  email,
  city,
  documentType,
  documentNumber,
  message,
  status,
  contactId,
  projectId
})

// Update an existing lead
projectLead.update({
  id: string,
  ...leadData
})

// Delete a lead
projectLead.delete({ id: string })

// Get lead by contact
projectLead.getByContact({ contactId: string })
```

<br />

## âœ… Best Practices

<br />

1. **Complete Information** - Always fill in all contact details for effective follow-up
2. **Regular Updates** - Update lead status promptly as they progress through pipeline
3. **Detailed Notes** - Document all interactions and important details in message field
4. **Quick Follow-up** - Contact new leads within 24 hours for best conversion rates
5. **Contact Association** - Always link leads to contacts for relationship tracking
6. **Status Accuracy** - Keep statuses current to maintain accurate pipeline visibility

<br />

## ğŸ“ˆ Lead Conversion Tips

<br />

### Maximize Your Success Rate:

<div className="card">
  <div className="card-body">
    <div className="space-y-4">
      <div>
        <h4 className="font-semibold mb-2">ğŸ¯ Qualification</h4>
        <p className="text-sm">Qualify leads quickly - focus on those most likely to convert</p>
      </div>
      <div>
        <h4 className="font-semibold mb-2">âš¡ Speed</h4>
        <p className="text-sm">Respond to inquiries within hours, not days</p>
      </div>
      <div>
        <h4 className="font-semibold mb-2">ğŸ“ Documentation</h4>
        <p className="text-sm">Keep detailed notes of all conversations and next steps</p>
      </div>
      <div>
        <h4 className="font-semibold mb-2">ğŸ”„ Follow-up</h4>
        <p className="text-sm">Set reminders and follow up consistently</p>
      </div>
      <div>
        <h4 className="font-semibold mb-2">ğŸ¤– AI Assistance</h4>
        <p className="text-sm">Leverage AI agents for automated lead nurturing</p>
      </div>
    </div>
  </div>
</div>

<br />

## â“ Troubleshooting

<Callout type="warning">
  ### "Please select a project first" **Solution**: Select a project from the
  project selector before accessing the Lead Management module.
</Callout>

<Callout type="warning">
  ### Validation errors when creating/editing **Solution**: Check that all
  required fields are filled and meet validation criteria:
  - Valid email format
  - Non-empty strings
  - Correct document type selection
  - Valid contact association
</Callout>

<Callout type="warning">
  ### Lead not appearing in the list **Solution**:
  1. Verify you're viewing the correct project
  2. Check status filters (Processing vs Completed)
  3. Refresh the page
  4. Ensure you have proper permissions
</Callout>

<Callout type="warning">
  ### Cannot associate contact **Solution**:
  - Verify contact exists in the project
  - Create contact first if it doesn't exist
  - Check contact ID is valid
  - Ensure contact is in same project
</Callout>

<br />

## ğŸ†˜ Support

<br />
Need help with the Lead Management module?

- ğŸ‘¨â€ğŸ’¼ Contact your system administrator
- ğŸ¤– Check the AI Agent section for automated assistance
- ğŸ“§ Review your organization's sales process documentation
- ğŸ“„ Visit the [leads landing page](/apps/leads/landing) for more information

<br />

<Callout type="default" emoji="ğŸ“…">
  *Last updated: {new Date().toLocaleDateString()}*
</Callout>
